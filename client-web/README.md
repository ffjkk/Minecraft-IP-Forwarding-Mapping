# 内网穿透客户端 - 可视化管理界面

这是内网穿透客户端的专用Web可视化管理界面，提供完整的客户端监控、控制和管理功能。

## ✨ 主要功能

### 🎮 客户端控制
- **启动/停止控制**：一键启动和停止客户端服务
- **重启功能**：快速重启客户端连接
- **实时状态监控**：显示客户端运行状态（连接中、已连接、错误、已停止）

### 📊 可视化监控
- **连接统计面板**：总连接数、活跃连接、成功/失败连接统计
- **实时数据图表**：活跃连接数和重连次数的趋势图
- **连接历史记录**：详细的连接历史，包括状态、持续时间、错误信息
- **数据传输统计**：实时显示数据传输量和传输速度

### 🔍 详细监控信息
- **服务器信息**：目标服务器地址、本地服务器配置
- **运行时间统计**：客户端运行时长、最后活动时间
- **错误分析**：连接错误详情和重连统计
- **实时日志**：彩色分级日志，支持清空和自动滚动

### 🚀 智能功能
- **自动重连**：网络断开时自动重连机制
- **连接池管理**：智能的连接管理和资源优化
- **实时更新**：所有数据通过WebSocket实时更新
- **响应式设计**：支持桌面、平板、手机访问

## 📦 安装和使用

### 1. 进入客户端管理界面目录
```bash
cd client-web
```

### 2. 安装依赖
```bash
npm install
```

### 3. 启动客户端管理界面
```bash
npm start
```

### 4. 访问管理界面
在浏览器中打开：http://localhost:3001

## 🎯 使用说明

### 界面功能
1. **启动客户端**：点击绿色"启动客户端"按钮开始连接
2. **停止客户端**：点击红色"停止客户端"按钮断开连接
3. **重启客户端**：点击黄色"重启客户端"按钮重新建立连接
4. **实时监控**：查看连接状态、数据统计和历史记录

### 状态指示
- 🟢 **已连接**：客户端正常运行，隧道已建立
- 🟡 **连接中**：正在尝试连接到服务器
- 🔴 **连接错误**：连接失败，需要检查网络或服务器
- ⚫ **已停止**：客户端已停止运行

### 监控信息
- **总连接数**：自启动以来尝试的总连接次数
- **活跃连接**：当前正在使用的连接数量
- **成功连接**：成功建立的连接数量
- **失败连接**：连接失败的次数
- **重连次数**：自动重连的尝试次数

## 🔧 配置说明

### 默认配置
- **Web界面端口**：3001
- **目标服务器**：159.75.133.177:9000
- **本地MC服务器**：127.0.0.1:25565

### 修改配置
如需修改配置，请编辑 `client-web-server.js` 文件中的以下常量：
```javascript
const WEB_PORT = 3001;                  // Web管理界面端口
const PUBLIC_SERVER_IP = '159.75.133.177';  // 目标服务器IP
const PUBLIC_SERVER_PORT = 9000;       // 目标服务器端口
const LOCAL_MC_SERVER = '127.0.0.1';   // 本地MC服务器地址
const LOCAL_MC_PORT = 25565;           // 本地MC服务器端口
```

## 📊 界面详解

### 控制面板
- **启动按钮**：启动客户端连接服务
- **停止按钮**：停止客户端连接服务
- **重启按钮**：重启客户端服务
- **状态指示器**：显示当前客户端运行状态

### 统计仪表板
- **连接统计卡片**：显示各种连接统计数据
- **客户端信息**：运行时间、数据传输量、服务器配置
- **连接趋势图**：实时图表显示连接状态变化

### 连接管理
- **连接历史**：显示最近的连接记录，包括：
  - 连接ID和状态
  - 连接持续时间
  - 数据传输量
  - 错误信息（如有）
- **实时日志**：分级日志显示，包括：
  - 成功日志（绿色）
  - 信息日志（蓝色）
  - 警告日志（黄色）
  - 错误日志（红色）

## 🛠️ 技术特性

### 前端技术
- **Bootstrap 5**：现代化响应式UI框架
- **Chart.js**：动态数据图表
- **WebSocket**：实时数据通信
- **Bootstrap Icons**：丰富的图标库

### 后端技术
- **Node.js + Express**：Web服务器
- **Socket.IO**：实时双向通信
- **TCP Sockets**：网络连接管理

### 核心功能
- **实时监控**：所有数据实时更新，无需刷新页面
- **智能重连**：网络断开自动重连，提高可靠性
- **错误处理**：完善的错误处理和日志记录
- **资源管理**：自动清理无效连接，防止内存泄漏

## 🔒 注意事项

1. **网络配置**：确保目标服务器地址正确且可访问
2. **本地服务**：确保本地MC服务器正在运行且端口正确
3. **防火墙**：确保所需端口在防火墙中开放
4. **资源监控**：在高负载情况下注意监控系统资源使用

## 🚀 高级功能

### API接口
客户端管理界面提供REST API：
- `POST /api/start` - 启动客户端
- `POST /api/stop` - 停止客户端  
- `POST /api/restart` - 重启客户端
- `GET /api/stats` - 获取统计信息

### WebSocket事件
- `stats-update` - 统计信息更新
- `connection-event` - 连接事件通知
- `log-message` - 日志消息
- `connection-history` - 连接历史更新

---

现在您可以通过专业的Web界面轻松管理和监控您的内网穿透客户端！🎉
